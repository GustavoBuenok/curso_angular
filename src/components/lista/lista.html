<!-- <div style="padding: 2rem;">
  <h1>Gerenciador de Tarefas</h1>
  <div class="card flex gap-2 mb-4">
    <input pInputText [(ngModel)]="novoTitulo" placeholder="Nova Tarefa..." />
    <p-button label="Adicionar" icon="pi pi-plus" (onClick)="salvar()"></p-button>
  </div>

<p-table [value]="tarefas" [tableStyle]="{ 'min-width': '50rem' }">
<ng-template pTemplate="header">
<tr>
<th>Título</th>
<th>Status</th>
<th>Ações</th>
</tr>
</ng-template>
 
  <ng-template pTemplate="body" let-tarefa>
<tr>
<td>{{ tarefa.titulo }}</td>
<td>
<i 
          class="pi" 
          [ngClass]="tarefa.concluida ? 'pi-check text-green-500' : 'pi-times text-red-500'">
</i>
</td>
<td>
<p-button 
          icon="pi pi-trash" 
          severity="danger" 
          [rounded]="true" 
          (onClick)="deletar(tarefa)">
</p-button>
</td>
</tr>
</ng-template>
</p-table> -->

<!-- <div style="padding: 2rem;">
    <h1>Gerenciador de Tarefas</h1>
    <div class="card flex gap-2 mb-4">
        <input pInputText [(ngModel)]="novoTitulo" placeholder="Nova Tarefa..." />
        <p-button label="Adicionar" icon="pi pi-plus" (onClick)="salvar()"></p-button>
    </div>
    <table mat-table [dataSource]="tarefas" class="mat-elevation-z4" style="width:100%;">
        <ng-container matColumnDef="titulo">
            <th mat-header-cell *matHeaderCellDef>Título</th>
            <td mat-cell *matCellDef="let tarefa">{{tarefa.titulo}}</td>
        </ng-container>
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let tarefa">
                <mat-form-field>
                    <mat-select [(ngModel)]="tarefa.status" (selectionChange)="salvarStatus(tarefa)">
                        <mat-option *ngFor="let item of statusOptions" [value]="item.value">
                            {{ item.label }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </ng-container>

        <ng-container matColumnDef="acoes">
            <th mat-header-cell *matHeaderCellDef>Ações</th>
            <td mat-cell *matCellDef="let tarefa">
                <p-button severity="danger" [rounded]="true" (onClick)="deletar(tarefa.id)">
                    <mat-icon>delete</mat-icon>
                </p-button>


            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="colunas"></tr>
        <tr mat-row *matRowDef="let row; columns: colunas;"></tr>

    </table>
</div> -->

<div class="container">
  <div class="list-card">
    <h1>Gerenciador de Tarefas</h1>

    <form (submit)="salvar(); $event.preventDefault()" class="form-add">
      <input
        type="text"
        placeholder="Nova Tarefa..."
        [(ngModel)]="novoTitulo"
        name="novoTitulo"
        class="input-text"
      />
      <button type="submit" class="btn-primary" [disabled]="!novoTitulo.trim()">
        Adicionar
      </button>
    </form>

    <table class="task-table">
      <thead>
        <tr>
          <th>Título</th>
          <th>Status</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tarefa of tarefas">
          <td>{{ tarefa.titulo }}</td>
          <td>
            <select [(ngModel)]="tarefa.status" (change)="salvarStatus(tarefa)">
              <option [value]="true">Concluída</option>
              <option [value]="false">Pendente</option>
            </select>
          </td>
          <td>
            <button class="btn-danger" (click)="deletar(tarefa.id)" title="Deletar tarefa">
              &#x2715;
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
